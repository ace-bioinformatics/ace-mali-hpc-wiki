"use strict";(self.webpackChunkace_mali_hpc_wiki=self.webpackChunkace_mali_hpc_wiki||[]).push([[812],{4495:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"running-jobs/troubleshooting","title":"Troubleshooting Jobs","description":"When a SLURM job fails to start or runs into errors, there are several tools and techniques to help diagnose and fix the issue.","source":"@site/docs/running-jobs/troubleshooting.md","sourceDirName":"running-jobs","slug":"/running-jobs/troubleshooting","permalink":"/ace-hpc-wiki/ml/fa/docs/running-jobs/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/running-jobs/troubleshooting.md","tags":[],"version":"current","frontMatter":{"id":"troubleshooting","title":"Troubleshooting Jobs"},"sidebar":"wikiSidebar","previous":{"title":"Sample SLURM Job Scripts","permalink":"/ace-hpc-wiki/ml/fa/docs/running-jobs/sample-scripts"},"next":{"title":"Installed Software","permalink":"/ace-hpc-wiki/ml/fa/docs/software/installed"}}');var t=n(4848),r=n(8453);const o={id:"troubleshooting",title:"Troubleshooting Jobs"},l=void 0,d={},c=[{value:"Common Issues and Solutions",id:"common-issues-and-solutions",level:2},{value:"\ud83d\udeab Job Won\u2019t Start",id:"-job-wont-start",level:3},{value:"\u274c Job Fails Immediately",id:"-job-fails-immediately",level:3},{value:"\ud83d\udcc4 Helpful Debugging Tips",id:"-helpful-debugging-tips",level:3},{value:"\ud83d\udee0 Debugging with an Interactive Session",id:"-debugging-with-an-interactive-session",level:3},{value:"\ud83d\udcec Still Stuck?",id:"-still-stuck",level:3},{value:"Resources",id:"resources",level:3}];function a(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"When a SLURM job fails to start or runs into errors, there are several tools and techniques to help diagnose and fix the issue."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"common-issues-and-solutions",children:"Common Issues and Solutions"}),"\n",(0,t.jsx)(s.h3,{id:"-job-wont-start",children:"\ud83d\udeab Job Won\u2019t Start"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Check"}),(0,t.jsx)(s.th,{children:"Explanation"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"squeue -u $USER"})}),(0,t.jsx)(s.td,{children:"View your job's status in the queue. It might be waiting for resources."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"scontrol show job <id>"})}),(0,t.jsx)(s.td,{children:"Get detailed info on job state, pending reasons, and requested resources."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Resource Limits"}),(0,t.jsxs)(s.td,{children:["SLURM may delay your job if ",(0,t.jsx)(s.code,{children:"--mem"}),", ",(0,t.jsx)(s.code,{children:"--cpus"}),", or ",(0,t.jsx)(s.code,{children:"--time"})," is too high."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Partition Constraints"}),(0,t.jsx)(s.td,{children:"Ensure you're submitting to the correct partition, if applicable."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Node Availability"}),(0,t.jsxs)(s.td,{children:["Use ",(0,t.jsx)(s.code,{children:"sinfo"})," to check if nodes are online and available."]})]})]})]}),"\n",(0,t.jsx)(s.p,{children:"Try lowering resource requests temporarily or switching partitions (if available) to test submission."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"-job-fails-immediately",children:"\u274c Job Fails Immediately"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Symptom"}),(0,t.jsx)(s.th,{children:"Solution"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:".err"})," file has errors"]}),(0,t.jsx)(s.td,{children:"Always check this file for Python, R, Bash, or SLURM errors."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:'"command not found"'}),(0,t.jsx)(s.td,{children:"Ensure the right modules or environments are loaded in the script."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Segmentation fault or core dump"}),(0,t.jsx)(s.td,{children:"Likely a bug in your code or incompatible module\u2014run a smaller test."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Permission denied"}),(0,t.jsx)(s.td,{children:"Check file and directory permissions in your script or input/output paths."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Syntax errors"}),(0,t.jsxs)(s.td,{children:["Review your script syntax carefully (Bash/SLURM). Use ",(0,t.jsx)(s.code,{children:"shellcheck"})," to lint."]})]})]})]}),"\n",(0,t.jsx)(s.p,{children:"Also confirm that any scripts are executable:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"chmod +x script.sh\n"})}),"\n",(0,t.jsx)(s.h3,{id:"-helpful-debugging-tips",children:"\ud83d\udcc4 Helpful Debugging Tips"}),"\n",(0,t.jsx)(s.p,{children:"Add logging:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'echo "Starting at $(date)"\n'})}),"\n",(0,t.jsx)(s.p,{children:"Print environment:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"env\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Add ",(0,t.jsx)(s.code,{children:"set -x"})," in bash scripts to trace execution."]}),"\n",(0,t.jsx)(s.h3,{id:"-debugging-with-an-interactive-session",children:"\ud83d\udee0 Debugging with an Interactive Session"}),"\n",(0,t.jsx)(s.p,{children:"You can test interactively before submitting a batch job:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"salloc --time=01:00:00 --ntasks=1 --mem=4G\n"})}),"\n",(0,t.jsx)(s.h3,{id:"-still-stuck",children:"\ud83d\udcec Still Stuck?"}),"\n",(0,t.jsxs)(s.p,{children:["Contact ",(0,t.jsx)(s.a,{href:"mailto:support@ace-bioinformatics.org",children:"support@ace-bioinformatics.org"})," with:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Job ID ",(0,t.jsx)(s.code,{children:"sacct -j <id>"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Your SLURM script"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Error file output"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Any steps you've already taken to debug"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"This helps the support team resolve the issue faster."}),"\n",(0,t.jsx)(s.h3,{id:"resources",children:"Resources"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://slurm.schedmd.com/job_exit_code.html",children:"SLURM Job Exit Codes"})})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(6540);const t={},r=i.createContext(t);function o(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);