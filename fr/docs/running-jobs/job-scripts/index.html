<!doctype html>
<html lang="fr" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-running-jobs/job-scripts" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Writing Job Scripts | ACE MALI HPC Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ace-bioinformatics.github.io/ace-hpc-wiki/ml/fr/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ace-bioinformatics.github.io/ace-hpc-wiki/ml/fr/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ace-bioinformatics.github.io/ace-hpc-wiki/ml/fr/docs/running-jobs/job-scripts"><meta data-rh="true" property="og:locale" content="fr"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" property="og:locale:alternate" content="fa"><meta data-rh="true" name="docusaurus_locale" content="fr"><meta data-rh="true" name="docsearch:language" content="fr"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Writing Job Scripts | ACE MALI HPC Wiki"><meta data-rh="true" name="description" content="SLURM job scripts are used to submit tasks to the cluster. These scripts define the resources required for the job, such as memory, time, and number of processors, as well as the software environment."><meta data-rh="true" property="og:description" content="SLURM job scripts are used to submit tasks to the cluster. These scripts define the resources required for the job, such as memory, time, and number of processors, as well as the software environment."><link data-rh="true" rel="icon" href="https://ace.ac.ug/wp-content/uploads/2022/04/cropped-android-chrome-512x512-2.png"><link data-rh="true" rel="canonical" href="https://ace-bioinformatics.github.io/ace-hpc-wiki/ml/fr/docs/running-jobs/job-scripts"><link data-rh="true" rel="alternate" href="https://ace-bioinformatics.github.io/ace-hpc-wiki/ml/docs/running-jobs/job-scripts" hreflang="en"><link data-rh="true" rel="alternate" href="https://ace-bioinformatics.github.io/ace-hpc-wiki/ml/fr/docs/running-jobs/job-scripts" hreflang="fr"><link data-rh="true" rel="alternate" href="https://ace-bioinformatics.github.io/ace-hpc-wiki/ml/fa/docs/running-jobs/job-scripts" hreflang="fa"><link data-rh="true" rel="alternate" href="https://ace-bioinformatics.github.io/ace-hpc-wiki/ml/docs/running-jobs/job-scripts" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Writing Job Scripts","item":"https://ace-bioinformatics.github.io/ace-hpc-wiki/ml/fr/docs/running-jobs/job-scripts"}]}</script><link rel="stylesheet" href="/ace-hpc-wiki/ml/fr/assets/css/styles.827caf30.css">
<script src="/ace-hpc-wiki/ml/fr/assets/js/runtime~main.025c9cc5.js" defer="defer"></script>
<script src="/ace-hpc-wiki/ml/fr/assets/js/main.62fbff63.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ace-hpc-wiki/ml/fr/img/ace.png"><div role="region" aria-label="Aller au contenu principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Aller au contenu principal</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Ouvrir/fermer la barre de navigation" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ace-hpc-wiki/ml/fr/"><div class="navbar__logo"><img src="/ace-hpc-wiki/ml/fr/img/ace.png" alt="ACE logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ace-hpc-wiki/ml/fr/img/ace.png" alt="ACE logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ACE MALI HPC WIKI</b></a><a class="navbar__item navbar__link" href="/ace-hpc-wiki/ml/fr/docs/getting-started/accounts">Wiki</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/ace-bioinformatics/ace-hpc-wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Français</a><ul class="dropdown__menu"><li><a href="/ace-hpc-wiki/ml/docs/running-jobs/job-scripts" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/ace-hpc-wiki/ml/fr/docs/running-jobs/job-scripts" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="fr">Français</a></li><li><a href="/ace-hpc-wiki/ml/fa/docs/running-jobs/job-scripts" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fa">فارسی</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Basculer entre le mode sombre et clair (actuellement system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Retour au début de la page" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ace-hpc-wiki/ml/fr/docs/intro">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ace-hpc-wiki/ml/fr/docs/getting-started/accounts">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ace-hpc-wiki/ml/fr/docs/hardware/overview">Hardware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/ace-hpc-wiki/ml/fr/docs/running-jobs/slurm-basics">Running Jobs</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ace-hpc-wiki/ml/fr/docs/running-jobs/slurm-basics">SLURM Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ace-hpc-wiki/ml/fr/docs/running-jobs/job-scripts">Writing Job Scripts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ace-hpc-wiki/ml/fr/docs/running-jobs/sample-scripts">Sample SLURM Job Scripts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ace-hpc-wiki/ml/fr/docs/running-jobs/troubleshooting">Troubleshooting Jobs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ace-hpc-wiki/ml/fr/docs/software/installed">Software</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ace-hpc-wiki/ml/fr/docs/support/faq">Support</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Fil d&#x27;Ariane"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Page d&#x27;accueil" class="breadcrumbs__link" href="/ace-hpc-wiki/ml/fr/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Running Jobs</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Writing Job Scripts</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Sur cette page</button></div><div class="theme-doc-markdown markdown"><header><h1>Writing Job Scripts</h1></header><p>SLURM job scripts are used to submit tasks to the cluster. These scripts define the resources required for the job, such as memory, time, and number of processors, as well as the software environment.</p>
<p>This guide will walk you through how to write a basic SLURM job script, using a BLAST (bioinformatics) job as an example.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-basic-structure-of-a-slurm-job-script">Step 1: Basic Structure of a SLURM Job Script<a href="#step-1-basic-structure-of-a-slurm-job-script" class="hash-link" aria-label="Lien direct vers Step 1: Basic Structure of a SLURM Job Script" title="Lien direct vers Step 1: Basic Structure of a SLURM Job Script">​</a></h2>
<p>A basic SLURM job script is a shell script that includes SLURM directives (prefixed with <code>#SBATCH</code>) to specify job parameters, followed by commands to run the actual task.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-slurm-job-script-blast-job">Example SLURM Job Script: BLAST Job<a href="#example-slurm-job-script-blast-job" class="hash-link" aria-label="Lien direct vers Example SLURM Job Script: BLAST Job" title="Lien direct vers Example SLURM Job Script: BLAST Job">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --job-name=blast_job       # Name of the job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --output=blast_job.out     # Output file for standard output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --error=blast_job.err      # Output file for standard error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --time=12:00:00            # Maximum run time (HH:MM:SS)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --nodes=1                  # Number of nodes to allocate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --ntasks-per-node=8        # Number of tasks per node (set according to your job)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --mem=32gb                 # Memory allocation per node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Load the necessary module (in this case, BLAST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module load blast/2.12.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run your job (example command for BLAST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">blastn -query input.fasta -db database -out results.txt -num_threads 8</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="explanation-of-slurm-directives">Explanation of SLURM Directives<a href="#explanation-of-slurm-directives" class="hash-link" aria-label="Lien direct vers Explanation of SLURM Directives" title="Lien direct vers Explanation of SLURM Directives">​</a></h3>
<ul>
<li><code>#!/bin/bash</code>: Specifies the shell to use for running the script (bash in this case).</li>
<li><code>#SBATCH --job-name=blast_job</code>: Assigns a name to your job. This is helpful for identifying the job in the queue.</li>
<li><code>#SBATCH --output=blast_job.out</code>: Specifies the file where standard output (stdout) will be saved.</li>
<li><code>#SBATCH --error=blast_job.err</code>: Specifies the file where standard error (stderr) will be saved.</li>
<li><code>#SBATCH --time=12:00:00</code>: Specifies the maximum run time for the job in the format <code>HH:MM:SS</code>. Set this based on how long your task is expected to run.</li>
<li><code>#SBATCH --nodes=1</code>: Requests one compute node for the job. If your task needs more nodes, you can increase this number.</li>
<li><code>#SBATCH --ntasks-per-node=8</code>: Requests 8 tasks (processes) per node. This is typically set based on how many CPU cores your task needs.</li>
<li><code>#SBATCH --mem=32gb</code>: Specifies how much memory to allocate per node. If your task requires more memory, adjust this value.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-loading-modules">Step 2: Loading Modules<a href="#step-2-loading-modules" class="hash-link" aria-label="Lien direct vers Step 2: Loading Modules" title="Lien direct vers Step 2: Loading Modules">​</a></h2>
<p>Most HPC systems, including ACE, have software installed in modules. Before you run your job, you may need to load the required software module.</p>
<p>In the example above, <code>module load blast/2.12.0</code> loads the specific version of the BLAST software needed for the task.</p>
<p>You can check available modules on your system with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module avail</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-writing-the-commands-to-run-your-task">Step 3: Writing the Commands to Run Your Task<a href="#step-3-writing-the-commands-to-run-your-task" class="hash-link" aria-label="Lien direct vers Step 3: Writing the Commands to Run Your Task" title="Lien direct vers Step 3: Writing the Commands to Run Your Task">​</a></h2>
<p>After setting up your SLURM directives, you can include the commands to run your job. In the example, the job runs a <code>blastn</code> command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">blastn -query input.fasta -db database -out results.txt -num_threads 8</span><br></span></code></pre></div></div>
<p>This command performs a BLAST search with the input file <code>input.fasta</code> against the <code>database</code>, saving the results to <code>results.txt</code>. The <code>-num_threads 8</code> argument tells BLAST to use 8 threads, corresponding to the number of tasks requested in the SLURM job script.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-submitting-your-job">Step 4: Submitting Your Job<a href="#step-4-submitting-your-job" class="hash-link" aria-label="Lien direct vers Step 4: Submitting Your Job" title="Lien direct vers Step 4: Submitting Your Job">​</a></h2>
<p>Once your job script is ready, save it to a file, such as <code>blast_job.sh</code>. To submit the job to SLURM, use the <code>sbatch</code> command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sbatch blast_job.sh</span><br></span></code></pre></div></div>
<p>You’ll receive a job ID upon submission, which you can use to track or cancel the job.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-monitoring-your-job">Step 5: Monitoring Your Job<a href="#step-5-monitoring-your-job" class="hash-link" aria-label="Lien direct vers Step 5: Monitoring Your Job" title="Lien direct vers Step 5: Monitoring Your Job">​</a></h2>
<p>After submission, you can monitor the status of your job using <code>squeue</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">squeue -u $USER</span><br></span></code></pre></div></div>
<p>This will list all your active and queued jobs. If your job is running, you&#x27;ll see its status here. You can also check detailed job information with <code>scontrol</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scontrol show job &lt;job_id&gt;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-6-checking-output-and-errors">Step 6: Checking Output and Errors<a href="#step-6-checking-output-and-errors" class="hash-link" aria-label="Lien direct vers Step 6: Checking Output and Errors" title="Lien direct vers Step 6: Checking Output and Errors">​</a></h2>
<p>After the job completes, check the output and error files you specified (<code>blast_job.out</code> and <code>blast_job.err</code>). If the job completes successfully, you should find your results in the output file (<code>results.txt</code>).</p>
<p>If your job fails, review the <code>.err</code> file to find details about what went wrong. Common issues could include incorrect file paths, missing dependencies, or resource allocation problems.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices-for-writing-slurm-scripts">Best Practices for Writing SLURM Scripts<a href="#best-practices-for-writing-slurm-scripts" class="hash-link" aria-label="Lien direct vers Best Practices for Writing SLURM Scripts" title="Lien direct vers Best Practices for Writing SLURM Scripts">​</a></h2>
<ul>
<li>
<p><strong>Resource Allocation</strong>: Always request the appropriate resources. If your job uses too many or too few, it may fail to start or cause inefficient resource usage. Adjust <code>--mem</code>, <code>--time</code>, <code>--nodes</code>, and <code>--ntasks-per-node</code> according to your task’s requirements.</p>
</li>
<li>
<p><strong>Modularize Your Script</strong>: If your script requires multiple dependencies, load them in sequence using <code>module load</code>.</p>
</li>
<li>
<p><strong>Use Relative Paths</strong>: Use relative paths for input/output files (e.g., <code>input.fasta</code>) unless your job requires absolute paths.</p>
</li>
<li>
<p><strong>Test Before Full Run</strong>: For large or long-running jobs, try to test your script with a smaller dataset or a shorter run time to ensure everything works as expected.</p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-another-bioinformatics-task-hisat2">Example: Another Bioinformatics Task (Hisat2)<a href="#example-another-bioinformatics-task-hisat2" class="hash-link" aria-label="Lien direct vers Example: Another Bioinformatics Task (Hisat2)" title="Lien direct vers Example: Another Bioinformatics Task (Hisat2)">​</a></h2>
<p>Here’s an example of a job script for a HISAT2 task:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --job-name=hisat2_job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --output=hisat2_job.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --error=hisat2_job.err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --time=02:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --nodes=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --ntasks-per-node=8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --mem=16gb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module load hisat2/2.2.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hisat2 -p 8 -x genome_index -U reads.fastq -S output.sam</span><br></span></code></pre></div></div>
<p>In this example:</p>
<ul>
<li><code>-p 8</code>: Uses 8 threads.</li>
<li><code>-x genome_index</code>: Specifies the genome index for alignment.</li>
<li><code>-U reads.fastq</code>: Input file for single-end reads.</li>
<li><code>-S output.sam</code>: Output SAM file.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-tips">Troubleshooting Tips<a href="#troubleshooting-tips" class="hash-link" aria-label="Lien direct vers Troubleshooting Tips" title="Lien direct vers Troubleshooting Tips">​</a></h2>
<ul>
<li><strong>Job won&#x27;t start</strong>: Check if there are sufficient resources available with <code>squeue</code> or <code>sinfo</code>. If needed, reduce resource requests like <code>--time</code> or <code>--mem</code>.</li>
<li><strong>Job fails with segmentation fault</strong>: Test the job interactively (<code>salloc</code>) to debug any code issues in a smaller test.</li>
<li><strong>Incorrect output</strong>: Ensure all file paths are correct and that you’re using the correct module versions.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Lien direct vers Conclusion" title="Lien direct vers Conclusion">​</a></h2>
<p>Writing and submitting a SLURM job script is the standard way to run tasks on the ACE HPC Cluster. By setting appropriate resource limits, loading necessary software modules, and properly writing the commands to run your tasks, you can efficiently use the cluster’s resources.</p>
<p>For more examples and advanced topics, refer to the <a href="https://slurm.schedmd.com/documentation.html" target="_blank" rel="noopener noreferrer">SLURM documentation</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/running-jobs/job-scripts.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Éditer cette page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Pages de documentation"><a class="pagination-nav__link pagination-nav__link--prev" href="/ace-hpc-wiki/ml/fr/docs/running-jobs/slurm-basics"><div class="pagination-nav__sublabel">Précédent</div><div class="pagination-nav__label">SLURM Basics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ace-hpc-wiki/ml/fr/docs/running-jobs/sample-scripts"><div class="pagination-nav__sublabel">Suivant</div><div class="pagination-nav__label">Sample SLURM Job Scripts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#step-1-basic-structure-of-a-slurm-job-script" class="table-of-contents__link toc-highlight">Step 1: Basic Structure of a SLURM Job Script</a><ul><li><a href="#example-slurm-job-script-blast-job" class="table-of-contents__link toc-highlight">Example SLURM Job Script: BLAST Job</a></li><li><a href="#explanation-of-slurm-directives" class="table-of-contents__link toc-highlight">Explanation of SLURM Directives</a></li></ul></li><li><a href="#step-2-loading-modules" class="table-of-contents__link toc-highlight">Step 2: Loading Modules</a></li><li><a href="#step-3-writing-the-commands-to-run-your-task" class="table-of-contents__link toc-highlight">Step 3: Writing the Commands to Run Your Task</a></li><li><a href="#step-4-submitting-your-job" class="table-of-contents__link toc-highlight">Step 4: Submitting Your Job</a></li><li><a href="#step-5-monitoring-your-job" class="table-of-contents__link toc-highlight">Step 5: Monitoring Your Job</a></li><li><a href="#step-6-checking-output-and-errors" class="table-of-contents__link toc-highlight">Step 6: Checking Output and Errors</a></li><li><a href="#best-practices-for-writing-slurm-scripts" class="table-of-contents__link toc-highlight">Best Practices for Writing SLURM Scripts</a></li><li><a href="#example-another-bioinformatics-task-hisat2" class="table-of-contents__link toc-highlight">Example: Another Bioinformatics Task (Hisat2)</a></li><li><a href="#troubleshooting-tips" class="table-of-contents__link toc-highlight">Troubleshooting Tips</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ace-hpc-wiki/ml/fr/docs/intro">Get Start</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Quick Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.niaid.nih.gov/research/african-centers-excellence" target="_blank" rel="noopener noreferrer" class="footer__link-item">NIAID/NIH<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 ACE WIKI, ACE - Uganda. Wasukira Ian.</div></div></div></footer></div>
</body>
</html>